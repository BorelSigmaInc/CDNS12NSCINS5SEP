<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Careers | Zi-US Research</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500&display=swap');
        :root {
            --primary: #000000; --secondary: #1a1a1a; --accent: #0066ff;
            --gray-100: #f8f9fa; --gray-200: #e9ecef; --gray-600: #6c757d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { font-size: 62.5%; }
        body { font-family: 'Calibri Light', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; font-weight: 300; font-size: 1.4rem; line-height: 1.6; color: var(--primary); background: #ffffff; }
        nav { background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(10px); border-bottom: 1px solid var(--gray-200); padding: 1.2rem 0; }
        .nav-container { display: flex; align-items: center; justify-content: space-between; max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
        .brand-name { font-size: 1.4rem; font-weight: 400; letter-spacing: 0.05em; text-decoration: none; color: var(--primary); }
        .container { max-width: 1200px; margin: 0 auto; padding: 6rem 2rem; }
        .page-header { text-align: center; padding: 6rem 0; background: var(--gray-100); border-bottom: 1px solid var(--gray-200); }
        .page-header h1 { font-size: 4.2rem; font-weight: 200; margin-bottom: 1.6rem; }
        .page-header p { font-size: 1.4rem; color: var(--gray-600); max-width: 600px; margin: 0 auto; }
        .job-listings { display: grid; grid-template-columns: 1fr; gap: 2rem; }
        .job-card { background: white; border: 1px solid var(--gray-200); border-radius: 0.4rem; padding: 2.5rem; display: flex; flex-direction: column; justify-content: space-between; align-items: flex-start; transition: all 0.2s ease; }
        .job-card:hover { border-color: var(--accent); }
        .job-info h2 { font-size: 1.8rem; font-weight: 400; margin-bottom: 0.5rem; }
        .job-meta { display: flex; flex-wrap: wrap; gap: 2rem; font-size: 1.1rem; color: var(--gray-600); margin-bottom: 1.5rem; }
        .job-description { font-size: 1.2rem; color: var(--gray-600); }
        .btn { padding: 0.8rem 2rem; font-size: 1.1rem; font-weight: 400; border: 1px solid var(--primary); background: var(--primary); color: white; cursor: pointer; transition: all 0.2s ease; text-decoration: none; display: inline-flex; align-items: center; gap: 0.8rem; letter-spacing: 0.02em; border-radius: 0.2rem; margin-top: 1.5rem; }
        .load-more-container { text-align: center; margin-top: 4rem; }
        .job-card.hidden { display: none; }
        
        @media (min-width: 768px) { 
            .job-card { flex-direction: row; align-items: center; } 
            .btn { margin-top: 0; } 
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="brand-name">Zi-US Research</a>
            <a href="index.html" style="font-size: 1.1rem; text-decoration: none; color: var(--primary);">‚Üê Back to Overview</a>
        </div>
    </nav>
    <header class="page-header">
        <h1>Join Our Team</h1>
        <p>We are seeking brilliant minds to help us push the boundaries of plasma physics and fusion energy. Explore our open positions below.</p>
    </header>
    <div class="container">
        <div class="job-listings">
            <!-- Existing Job Listings -->
            <div class="job-card">
                <div class="job-info">
                    <h2>Project Lead (Senior Engineer / Lead Scientist)</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Research Park, HQ</span>
                        <span><strong>Type:</strong> Full-time</span>
                    </div>
                    <p class="job-description">Overall delivery for Codex POC: strategy, milestones, stakeholder alignment, and governance.</p>
                </div>
                <a href="apply_project_manager.html" class="btn">Apply Now</a>
            </div>
            <div class="job-card">
                <div class="job-info">
                    <h2>ML Engineer</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Remote / HQ</span>
                        <span><strong>Type:</strong> Full-time</span>
                    </div>
                    <p class="job-description">Fine-tune and evaluate codex-like models; build Pass@k pipelines and benchmarking.</p>
                </div>
                <a href="apply_scientist.html" class="btn">Apply Now</a>
            </div>
            <div class="job-card">
                <div class="job-info">
                    <h2>Data Engineer</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Research Park, HQ</span>
                        <span><strong>Type:</strong> Full-time</span>
                    </div>
                    <p class="job-description">Prepare datasets, ETL pipelines, and data QA for training/evaluation with governance.</p>
                </div>
                <a href="apply_engineer.html" class="btn">Apply Now</a>
            </div>
            <div class="job-card">
                <div class="job-info">
                    <h2>QA Engineer</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Remote</span>
                        <span><strong>Type:</strong> Contract</span>
                    </div>
                    <p class="job-description">Author automated unit tests and benchmark suites to measure functional correctness.</p>
                </div>
                <a href="apply_analyst.html" class="btn">Apply Now</a>
            </div>

            <!-- Newly Added Job Listings with Correct Links -->
            <div class="job-card">
                <div class="job-info">
                    <h2>DevOps Engineer</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Research Park, HQ</span>
                        <span><strong>Type:</strong> Full-time</span>
                    </div>
                    <p class="job-description">Provision secure Kubernetes/gVisor sandboxes, eBPF network policies, and CI.</p>
                </div>
                <a href="apply_project_manager.html" class="btn">Apply Now</a>
            </div>
            <div class="job-card">
                <div class="job-info">
                    <h2>Security Analyst</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Research Park, HQ</span>
                        <span><strong>Type:</strong> Full-time</span>
                    </div>
                    <p class="job-description">Perform security reviews, risk assessments, and audits for model outputs and code.</p>
                </div>
                <a href="apply_channel_partner.html" class="btn">Apply Now</a>
            </div>
            <div class="job-card">
                <div class="job-info">
                    <h2>Documentation (Technical Writer / Intern)</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Remote / HQ</span>
                        <span><strong>Type:</strong> Internship</span>
                    </div>
                    <p class="job-description">Maintain research documentation, style guides, and docstring generation samples.</p>
                </div>
                <a href="apply_product_intern_saas.html" class="btn">Apply Now</a>
            </div>
            <div class="job-card">
                <div class="job-info">
                    <h2>Channel Partner (Collaboration)</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Research Park, HQ</span>
                        <span><strong>Type:</strong> Internship</span>
                    </div>
                    <p class="job-description">Engage with academic/industry partners for datasets, benchmarking, and compute access.</p>
                </div>
                <a href="apply_product_intern_haas.html" class="btn">Apply Now</a>
            </div>
            <div class="job-card">
                <div class="job-info">
                    <h2>Channel Partner</h2>
                    <div class="job-meta">
                        <span><strong>Location:</strong> Global / Remote</span>
                        <span><strong>Type:</strong> Partnership</span>
                    </div>
                    <p class="job-description">Establish and manage relationships with academic institutions and private labs to expand the reach of our research tools.</p>
                </div>
                <a href="apply_channel_partner.html" class="btn">Apply Now</a>
            </div>
        </div>
        <div class="load-more-container" id="load-more-container">
            <button class="btn" id="load-more-btn">Load More</button>
        </div>
        
        <!-- Team Structure & Execution Landscape (POC) -->
        <section style="margin-top: 6rem;">
            <h2 style="font-size:2.2rem; font-weight:300; margin-bottom: 1.2rem;">Team Structure & Execution Landscape (POC)</h2>
            <p style="font-size:1.3rem; color: var(--gray-600); margin-bottom: 1.6rem;">This table loads from the provided Google Sheet and Apps Script. If access isnt public yet, you will see a helpful notice.</p>
            <div id="hiring-table-container" style="overflow-x:auto;">
                <!-- Hiring table will render here -->
            </div>
            <div id="hiring-table-note" style="font-size:1.1rem; color: var(--gray-600); margin-top: 0.8rem;"></div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const jobListings = document.querySelector('.job-listings');
            const jobCards = Array.from(jobListings.children);
            const loadMoreBtn = document.getElementById('load-more-btn');
            const loadMoreContainer = document.getElementById('load-more-container');
            const jobsToShowInitially = 4;
            let jobsCurrentlyShown = jobsToShowInitially;

            jobCards.forEach((card, index) => {
                if (index >= jobsToShowInitially) {
                    card.classList.add('hidden');
                }
            });

            if (jobCards.length <= jobsToShowInitially) {
                if(loadMoreContainer) loadMoreContainer.style.display = 'none';
            }

            if(loadMoreBtn) {
                loadMoreBtn.addEventListener('click', function() {
                    for (let i = jobsCurrentlyShown; i < jobsCurrentlyShown + jobsToShowInitially && i < jobCards.length; i++) {
                        jobCards[i].classList.remove('hidden');
                    }
                    jobsCurrentlyShown += jobsToShowInitially;

                    if (jobsCurrentlyShown >= jobCards.length) {
                        if(loadMoreContainer) loadMoreContainer.style.display = 'none';
                    }
                });
            }
            
            // Hiring data section
            const hiringContainer = document.getElementById('hiring-table-container');
            const hiringNote = document.getElementById('hiring-table-note');
            const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzAQQvhOcN8l6QWeZFpILlAt0z_Vkyzq8DkMcgUbnHzL-oNfM575P7g-tVRUraLTSzG/exec';
            const SHEET_ID = '1hmIb1HaYyE-VU-vx9NBgsx0TiPaUiA7JTboX7VK2mHc';
            const GID = '0';

            function renderTable(headers, rows) {
                const table = document.createElement('table');
                table.style.width = '100%';
                table.style.borderCollapse = 'collapse';
                table.style.fontSize = '1.2rem';

                const thead = document.createElement('thead');
                const headTr = document.createElement('tr');
                headers.forEach(h => {
                    const th = document.createElement('th');
                    th.textContent = h;
                    th.style.textAlign = 'left';
                    th.style.borderBottom = '1px solid var(--gray-200)';
                    th.style.padding = '0.8rem';
                    headTr.appendChild(th);
                });
                thead.appendChild(headTr);
                table.appendChild(thead);

                const tbody = document.createElement('tbody');
                rows.forEach(row => {
                    const tr = document.createElement('tr');
                    row.forEach(cell => {
                        const td = document.createElement('td');
                        td.textContent = cell == null ? '' : String(cell);
                        td.style.padding = '0.8rem';
                        td.style.borderBottom = '1px solid var(--gray-200)';
                        tr.appendChild(td);
                    });
                    tbody.appendChild(tr);
                });
                table.appendChild(tbody);

                hiringContainer.innerHTML = '';
                hiringContainer.appendChild(table);
            }

            function parseGviz(text) {
                const match = text.match(/google\\.visualization\\.Query\\.setResponse\\((.*)\\);/s);
                if (!match) throw new Error('GViz: response format not recognized');
                const payload = JSON.parse(match[1]);
                const cols = payload.table.cols.map(c => c.label || c.id || '');
                const rows = payload.table.rows.map(r => (r.c || []).map(c => (c ? (c.f != null ? c.f : c.v) : '')));
                return { headers: cols, rows };
            }

            function parseCsv(text) {
                const lines = text.replace(/\r/g, '').split('\n').filter(Boolean);
                if (lines.length === 0) return { headers: [], rows: [] };
                const headers = lines[0].split(',').map(s => s.replace(/^\"|\"$/g, ''));
                const rows = lines.slice(1).map(line => line.split(',').map(s => s.replace(/^\"|\"$/g, '')));
                return { headers, rows };
            }

            async function tryAppsScript() {
                const res = await fetch(APPS_SCRIPT_URL, { credentials: 'omit' });
                const text = await res.text();
                if (text.includes('Script function not found')) {
                    throw new Error('Apps Script not published with doGet');
                }
                let json;
                try { json = JSON.parse(text); } catch (e) { throw new Error('Apps Script did not return JSON'); }
                if (!Array.isArray(json)) throw new Error('Apps Script JSON not an array');
                const headers = Object.keys(json[0] || {});
                const rows = json.map(obj => headers.map(h => obj[h]));
                return { headers, rows };
            }

            async function tryGviz() {
                const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&gid=${GID}`;
                const res = await fetch(url, { credentials: 'omit' });
                const text = await res.text();
                return parseGviz(text);
            }

            async function tryCsv() {
                const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID}`;
                const res = await fetch(url, { credentials: 'omit' });
                const text = await res.text();
                return parseCsv(text);
            }

            (async () => {
                hiringNote.textContent = 'Loading team structure from Google Sheet...';
                try {
                    const { headers, rows } = await tryAppsScript();
                    renderTable(headers, rows);
                    hiringNote.textContent = 'Source: Apps Script';
                } catch (e1) {
                    try {
                        const { headers, rows } = await tryGviz();
                        renderTable(headers, rows);
                        hiringNote.innerHTML = 'Source: Google Sheets (gviz). If you prefer Apps Script, ensure a published doGet handler at <a href="https://script.google.com/macros/s/AKfycbzAQQvhOcN8l6QWeZFpILlAt0z_Vkyzq8DkMcgUbnHzL-oNfM575P7g-tVRUraLTSzG/exec" target="_blank">Apps Script URL</a>.';
                    } catch (e2) {
                        try {
                            const { headers, rows } = await tryCsv();
                            renderTable(headers, rows);
                            hiringNote.textContent = 'Source: Google Sheets (CSV export)';
                        } catch (e3) {
                            hiringContainer.innerHTML = '<p style="font-size:1.2rem; color: var(--gray-600);">Could not load hiring table. Please publish the sheet (Anyone with link can view) or publish the Apps Script with a doGet() JSON response.</p>';
                            hiringNote.innerHTML = `Sheet: <a href="https://docs.google.com/spreadsheets/d/${SHEET_ID}/edit?gid=${GID}#gid=${GID}" target="_blank">open</a>`;
                        }
                    }
                }
            })();
        });
    </script>
</body>
</html>
